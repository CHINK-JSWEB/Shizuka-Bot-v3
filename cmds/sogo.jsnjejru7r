const axios = require("axios");

module.exports = {
  name: "sogo",
  version: "1.0",
  description: "Search XNXX videos using Nekorinn API",
  usage: "sogo <keyword>",
  credits: "Nikox",
  hasPrefix: false,
  cooldown: 3,

  async execute({ api, event, args }) {
    const search = args.join(" ");
    if (!search)
      return api.sendMessage("âŒ Maling Format!\nğŸ“Œ Gamitin: sogo <search>\nğŸ§ª Halimbawa: sogo pinay", event.threadID);

    try {
      const res = await axios.get(`https://api.nekorinn.my.id/search/xnxx?q=${encodeURIComponent(search)}`);
      const results = res.data.result;

      if (!results || results.length === 0)
        return api.sendMessage(`âŒ Walang resulta para sa: ${search}`, event.threadID);

      const video = results[Math.floor(Math.random() * results.length)];

      const message = `ğŸ” XNXX Result para sa: ${search}\n\n` +
                      `ğŸ“„ Title: ${video.title}\n` +
                      `ğŸ•’ Duration: ${video.duration}\n` +
                      `ğŸ”— Link: ${video.url}`;

      return api.sendMessage(message, event.threadID);

    } catch (err) {
      console.error("âŒ API ERROR:", err);
      return api.sendMessage("âš ï¸ May error habang kumukuha ng video. Subukang muli.", event.threadID);
    }
  }
};n
